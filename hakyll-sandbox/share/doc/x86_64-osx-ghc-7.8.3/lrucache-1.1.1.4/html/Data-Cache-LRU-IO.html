<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Cache.LRU.IO</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Cache-LRU-IO.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lrucache-1.1.1.4: a simple, pure LRU cache</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Cache.LRU.IO</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains a mutable wrapping of an LRU in the IO
 monad, providing atomic access in a concurrent environment.  All
 calls preserve the same semantics as those in <a href="Data-Cache-LRU.html">Data.Cache.LRU</a>, but
 perform updates in place.  All functions use a single atomic update
 of the backing structure.</p><p>The interface this module provides is opaque.  If further control
 is desired, the <a href="Data-Cache-LRU-IO-Internal.html">Data.Cache.LRU.IO.Internal</a> module can be used in
 combination with <a href="Data-Cache-LRU-Internal.html">Data.Cache.LRU.Internal</a>.</p><p>(This implementation uses an MVar for coarse locking. It's unclear
 if anything else would give better performance, given that many
 calls alter the head of the access list.)</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:AtomicLRU">AtomicLRU</a> key val</li><li class="src short"><a href="#v:newAtomicLRU">newAtomicLRU</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val)</li><li class="src short"><a href="#v:fromList">fromList</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a> -&gt; [(key, val)] -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val)</li><li class="src short"><a href="#v:toList">toList</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> [(key, val)]</li><li class="src short"><a href="#v:maxSize">maxSize</a> ::  <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a>)</li><li class="src short"><a href="#v:insert">insert</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; val -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:lookup">lookup</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> val)</li><li class="src short"><a href="#v:delete">delete</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> val)</li><li class="src short"><a href="#v:pop">pop</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (key, val))</li><li class="src short"><a href="#v:size">size</a> ::  <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:modifyAtomicLRU">modifyAtomicLRU</a> ::  (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val -&gt; <a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val) -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:modifyAtomicLRU-39-">modifyAtomicLRU'</a> ::  (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val)) -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:AtomicLRU" class="def">AtomicLRU</a> key val</p><div class="doc"><p>The opaque wrapper type</p></div></div><div class="top"><p class="src"><a name="v:newAtomicLRU" class="def">newAtomicLRU</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a></td><td class="doc"><p>the optional maximum size</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Make a new AtomicLRU that will not grow beyond the optional
 maximum size, if specified.</p></div></div><div class="top"><p class="src"><a name="v:fromList" class="def">fromList</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a></td><td class="doc"><p>the optional maximum size</p></td></tr><tr><td class="src">-&gt; [(key, val)]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Build a new LRU from the optional maximum size and list of
 contents. See <code><a href="Data-Cache-LRU.html#v:fromList">fromList</a></code> for the semantics.</p></div></div><div class="top"><p class="src"><a name="v:toList" class="def">toList</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> [(key, val)]</p><div class="doc"><p>Retrieve a list view of an AtomicLRU.  See <code><a href="Data-Cache-LRU.html#v:toList">toList</a></code> for the
 semantics.</p></div></div><div class="top"><p class="src"><a name="v:maxSize" class="def">maxSize</a> ::  <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Prelude.html#t:Integer">Integer</a>)</p></div><div class="top"><p class="src"><a name="v:insert" class="def">insert</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; val -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Insert a key/value pair into an AtomicLRU.  See <code><a href="Data-Cache-LRU.html#v:insert">insert</a></code> for
 the semantics.</p></div></div><div class="top"><p class="src"><a name="v:lookup" class="def">lookup</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> val)</p><div class="doc"><p>Look up a key in an AtomicLRU. See <code><a href="Data-Cache-LRU.html#v:lookup">lookup</a></code> for the
 semantics.</p></div></div><div class="top"><p class="src"><a name="v:delete" class="def">delete</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; key -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> val)</p><div class="doc"><p>Remove an item from an AtomicLRU.  Returns the value for the
 removed key, if it was present</p></div></div><div class="top"><p class="src"><a name="v:pop" class="def">pop</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Ord.html#t:Ord">Ord</a> key =&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Maybe.html#t:Maybe">Maybe</a> (key, val))</p><div class="doc"><p>Remove the least-recently accessed item from an AtomicLRU.
 Returns the (key, val) pair removed, if one was present.</p></div></div><div class="top"><p class="src"><a name="v:size" class="def">size</a> ::  <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a></p><div class="doc"><p>Returns the number of elements the AtomicLRU currently contains.</p></div></div><div class="top"><p class="src"><a name="v:modifyAtomicLRU" class="def">modifyAtomicLRU</a> ::  (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val -&gt; <a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val) -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Given a function that takes an <code><a href="Data-Cache-LRU.html#t:LRU">LRU</a></code> and returns one of the
 same type, use it to modify the contents of this AtomicLRU.</p></div></div><div class="top"><p class="src"><a name="v:modifyAtomicLRU-39-" class="def">modifyAtomicLRU'</a> ::  (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> (<a href="Data-Cache-LRU.html#t:LRU">LRU</a> key val)) -&gt; <a href="Data-Cache-LRU-IO.html#t:AtomicLRU">AtomicLRU</a> key val -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Given a function that takes an <code><a href="Data-Cache-LRU.html#t:LRU">LRU</a></code> and returns an IO action
 producting one of the same type, use it to modify the contents of
 this AtomicLRU.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>