<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Snap.Test</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Snap-Test.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">snap-core-0.9.6.4: Snap: A Haskell Web Framework (core interfaces and types)</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Snap.Test</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Combinators and types for testing Snap handlers.</a><ul><li><a href="#g:2">Types</a></li><li><a href="#g:3">Building Requests and testing handlers</a><ul><li><a href="#g:4">Convenience functions for generating common types of HTTP requests</a></li><li><a href="#g:5">Precise control over building Requests</a></li></ul></li></ul></li><li><a href="#g:6">HUnit Assertions</a></li><li><a href="#g:7">Getting response bodies</a></li><li><a href="#g:8">Dumping HTTP Responses</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The Snap.Test module contains primitives and combinators for testing Snap
 applications.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:RequestBuilder">RequestBuilder</a> m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:MultipartParams">MultipartParams</a> = [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="Snap-Test.html#t:MultipartParam">MultipartParam</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:MultipartParam">MultipartParam</a><ul class="subs"><li>= <a href="#v:FormData">FormData</a> [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a>]</li><li>| <a href="#v:Files">Files</a> [<a href="Snap-Test.html#t:FileData">FileData</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FileData">FileData</a> = <a href="#v:FileData">FileData</a> {<ul class="subs"><li><a href="#v:fdFileName">fdFileName</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:fdContentType">fdContentType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:fdContents">fdContents</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:RequestType">RequestType</a><ul class="subs"><li>= <a href="#v:GetRequest">GetRequest</a></li><li>| <a href="#v:RequestWithRawBody">RequestWithRawBody</a> <a href="Snap-Internal-Http-Types.html#t:Method">Method</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li>| <a href="#v:MultipartPostRequest">MultipartPostRequest</a> <a href="Snap-Test.html#t:MultipartParams">MultipartParams</a></li><li>| <a href="#v:UrlEncodedPostRequest">UrlEncodedPostRequest</a> <a href="Snap-Internal-Http-Types.html#t:Params">Params</a></li><li>| <a href="#v:DeleteRequest">DeleteRequest</a></li></ul></li><li class="src short"><a href="#v:buildRequest">buildRequest</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; m <a href="Snap-Internal-Http-Types.html#t:Request">Request</a></li><li class="src short"><a href="#v:runHandler">runHandler</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; <a href="Snap-Core.html#t:Snap">Snap</a> a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:runHandlerM">runHandlerM</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Snap-Core.html#t:MonadSnap">MonadSnap</a> n) =&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request">Request</a> -&gt; n a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; n b -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></li><li class="src short"><a href="#v:evalHandler">evalHandler</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; <a href="Snap-Core.html#t:Snap">Snap</a> a -&gt; m a</li><li class="src short"><a href="#v:evalHandlerM">evalHandlerM</a> :: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Snap-Core.html#t:MonadSnap">MonadSnap</a> n) =&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request">Request</a> -&gt; n a -&gt; m a) -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; n b -&gt; m b</li><li class="src short"><a href="#v:get">get</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:postUrlEncoded">postUrlEncoded</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:postMultipart">postMultipart</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:MultipartParams">MultipartParams</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:put">put</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:postRaw">postRaw</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:delete">delete</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:addHeader">addHeader</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/case-insensitive-1.1.0.3/doc/html/Data-CaseInsensitive.html#t:CI">CI</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setContentType">setContentType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setHeader">setHeader</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/case-insensitive-1.1.0.3/doc/html/Data-CaseInsensitive.html#t:CI">CI</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setHttpVersion">setHttpVersion</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setQueryString">setQueryString</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setQueryStringRaw">setQueryStringRaw</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setRequestPath">setRequestPath</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setRequestType">setRequestType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestType">RequestType</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:setSecure">setSecure</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</li><li class="src short"><a href="#v:assertSuccess">assertSuccess</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></li><li class="src short"><a href="#v:assert404">assert404</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></li><li class="src short"><a href="#v:assertRedirectTo">assertRedirectTo</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></li><li class="src short"><a href="#v:assertRedirect">assertRedirect</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></li><li class="src short"><a href="#v:assertBodyContains">assertBodyContains</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></li><li class="src short"><a href="#v:getResponseBody">getResponseBody</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:dumpResponse">dumpResponse</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:responseToString">responseToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></li></ul></div><div id="interface"><h1 id="g:1">Combinators and types for testing Snap handlers.</h1><h2 id="g:2">Types</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:RequestBuilder" class="def">RequestBuilder</a> m a</p><div class="doc"><p>RequestBuilder is a monad transformer that allows you to conveniently
 build a snap <code><a href="Snap-Internal-Http-Types.html#t:Request">Request</a></code> for testing.</p></div><div class="subs instances"><p id="control.i:RequestBuilder" class="caption collapser" onclick="toggleSection('i:RequestBuilder')">Instances</p><div id="section.i:RequestBuilder" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/mtl-2.1.3.1/doc/html/Control-Monad-State-Class.html#t:MonadState">MonadState</a> <a href="Snap-Internal-Http-Types.html#t:Request">Request</a> (<a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Functor">Functor</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Functor">Functor</a> m) =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:MultipartParams" class="def">MultipartParams</a> = [(<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="Snap-Test.html#t:MultipartParam">MultipartParam</a>)]</p><div class="doc"><p>A request body of type &quot;<code>multipart/form-data</code>&quot; consists of a set of
 named form parameters, each of which can by either a list of regular form
 values or a set of file uploads.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:MultipartParam" class="def">MultipartParam</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FormData" class="def">FormData</a> [<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a>]</td><td class="doc"><p>a form variable consisting of the given <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></code> values.</p></td></tr><tr><td class="src"><a name="v:Files" class="def">Files</a> [<a href="Snap-Test.html#t:FileData">FileData</a>]</td><td class="doc"><p>a file upload consisting of the given <code><a href="Snap-Test.html#t:FileData">FileData</a></code> values.</p></td></tr></table></div><div class="subs instances"><p id="control.i:MultipartParam" class="caption collapser" onclick="toggleSection('i:MultipartParam')">Instances</p><div id="section.i:MultipartParam" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Text-Show.html#t:Show">Show</a> <a href="Snap-Test.html#t:MultipartParam">MultipartParam</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FileData" class="def">FileData</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FileData" class="def">FileData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fdFileName" class="def">fdFileName</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>the file's name</p></dd><dt class="src"><a name="v:fdContentType" class="def">fdContentType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>the file's content-type</p></dd><dt class="src"><a name="v:fdContents" class="def">fdContents</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>the file contents</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:FileData" class="caption collapser" onclick="toggleSection('i:FileData')">Instances</p><div id="section.i:FileData" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Text-Show.html#t:Show">Show</a> <a href="Snap-Test.html#t:FileData">FileData</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:RequestType" class="def">RequestType</a></p><div class="doc"><p>The <code><a href="Snap-Test.html#t:RequestType">RequestType</a></code> datatype enumerates the different kinds of HTTP
 requests you can generate using the testing interface. Most users will
 prefer to use the <code><a href="Snap-Test.html#v:get">get</a></code>, <code><a href="Snap-Test.html#v:postUrlEncoded">postUrlEncoded</a></code>, <code><a href="Snap-Test.html#v:postMultipart">postMultipart</a></code>, <code><a href="Snap-Test.html#v:put">put</a></code>, and
 <code><a href="Snap-Test.html#v:delete">delete</a></code> convenience functions.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:GetRequest" class="def">GetRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:RequestWithRawBody" class="def">RequestWithRawBody</a> <a href="Snap-Internal-Http-Types.html#t:Method">Method</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:MultipartPostRequest" class="def">MultipartPostRequest</a> <a href="Snap-Test.html#t:MultipartParams">MultipartParams</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:UrlEncodedPostRequest" class="def">UrlEncodedPostRequest</a> <a href="Snap-Internal-Http-Types.html#t:Params">Params</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:DeleteRequest" class="def">DeleteRequest</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:RequestType" class="caption collapser" onclick="toggleSection('i:RequestType')">Instances</p><div id="section.i:RequestType" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Text-Show.html#t:Show">Show</a> <a href="Snap-Test.html#t:RequestType">RequestType</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:3">Building Requests and testing handlers</h2><div class="top"><p class="src"><a name="v:buildRequest" class="def">buildRequest</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; m <a href="Snap-Internal-Http-Types.html#t:Request">Request</a></p><div class="doc"><p>Runs a <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code>, producing the desired <code><a href="Snap-Internal-Http-Types.html#t:Request">Request</a></code>.</p><p>N.B. <em>please</em> don't use the request you get here in a real Snap application;
 things will probably break. Don't say you weren't warned :-)</p></div></div><div class="top"><p class="src"><a name="v:runHandler" class="def">runHandler</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Core.html#t:Snap">Snap</a> a</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in the <code><a href="Snap-Core.html#t:Snap">Snap</a></code> monad, and a <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code> defining
 a test request, runs the handler, producing an HTTP <code><a href="Snap-Internal-Http-Types.html#t:Response">Response</a></code>.</p><p>This function will produce almost exactly the same output as running the
 handler in a real server, except that chunked transfer encoding is not
 applied, and the &quot;Transfer-Encoding&quot; header is not set (this makes it
 easier to test response output).</p></div></div><div class="top"><p class="src"><a name="v:runHandlerM" class="def">runHandlerM</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Snap-Core.html#t:MonadSnap">MonadSnap</a> n)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request">Request</a> -&gt; n a -&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a>)</td><td class="doc"><p>a function defining how the <code><a href="Snap-Core.html#t:MonadSnap">MonadSnap</a></code> monad should be run</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; n b</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in some arbitrary <code><a href="Snap-Core.html#t:MonadSnap">MonadSnap</a></code> monad, a function
 specifying how to evaluate it within the context of the test monad, and a
 <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code> defining a test request, runs the handler, producing an
 HTTP <code><a href="Snap-Internal-Http-Types.html#t:Response">Response</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:evalHandler" class="def">evalHandler</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m () -&gt; <a href="Snap-Core.html#t:Snap">Snap</a> a -&gt; m a</p><div class="doc"><p>Given a web handler in the <code><a href="Snap-Core.html#t:Snap">Snap</a></code> monad, and a <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code> defining a
 test request, runs the handler and returns the monadic value it produces.</p><p>Throws an exception if the <code><a href="Snap-Core.html#t:Snap">Snap</a></code> handler early-terminates with <code><a href="Snap-Core.html#v:finishWith">finishWith</a></code>
 or <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#v:mzero">mzero</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:evalHandlerM" class="def">evalHandlerM</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Snap-Core.html#t:MonadSnap">MonadSnap</a> n)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<span class="keyword">forall</span> a. <a href="Snap-Internal-Http-Types.html#t:Request">Request</a> -&gt; n a -&gt; m a)</td><td class="doc"><p>a function defining
 how the <code><a href="Snap-Core.html#t:MonadSnap">MonadSnap</a></code>
 monad should be run</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc"><p>a request builder</p></td></tr><tr><td class="src">-&gt; n b</td><td class="doc"><p>a web handler</p></td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a web handler in some arbitrary <code><a href="Snap-Core.html#t:MonadSnap">MonadSnap</a></code> monad, a function
 specifying how to evaluate it within the context of the test monad, and a
 <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code> defining a test request, runs the handler, returning the
 monadic value it produces.</p><p>Throws an exception if the <code><a href="Snap-Core.html#t:Snap">Snap</a></code> handler early-terminates with <code><a href="Snap-Core.html#v:finishWith">finishWith</a></code>
 or <code><a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#v:mzero">mzero</a></code>.</p></div></div><h3 id="g:4">Convenience functions for generating common types of HTTP requests</h3><div class="top"><p class="src"><a name="v:get" class="def">get</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;GET&quot; request with the given query parameters.</p></div></div><div class="top"><p class="src"><a name="v:postUrlEncoded" class="def">postUrlEncoded</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;POST&quot; request with the given form parameters, using the
 &quot;application/x-www-form-urlencoded&quot; MIME type.</p></div></div><div class="top"><p class="src"><a name="v:postMultipart" class="def">postMultipart</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:MultipartParams">MultipartParams</a></td><td class="doc"><p>multipart form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;POST&quot; request with the given form parameters, using the
 &quot;form-data/multipart&quot; MIME type.</p></div></div><div class="top"><p class="src"><a name="v:put" class="def">put</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request body MIME content-type</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request body contents</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;PUT&quot; request.</p></div></div><div class="top"><p class="src"><a name="v:postRaw" class="def">postRaw</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request body MIME content-type</p></td></tr><tr><td class="src">-&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request body contents</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds a &quot;raw&quot; HTTP &quot;POST&quot; request, with the given MIME type and body
 contents.</p></div></div><div class="top"><p class="src"><a name="v:delete" class="def">delete</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>request path</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a></td><td class="doc"><p>request's form parameters</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds an HTTP &quot;DELETE&quot; request with the given query parameters.</p></div></div><h3 id="g:5">Precise control over building Requests</h3><div class="top"><p class="src"><a name="v:addHeader" class="def">addHeader</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/case-insensitive-1.1.0.3/doc/html/Data-CaseInsensitive.html#t:CI">CI</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Adds the given header to the request being built.</p></div></div><div class="top"><p class="src"><a name="v:setContentType" class="def">setContentType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the request's <code>content-type</code> to the given MIME type.</p></div></div><div class="top"><p class="src"><a name="v:setHeader" class="def">setHeader</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/case-insensitive-1.1.0.3/doc/html/Data-CaseInsensitive.html#t:CI">CI</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the given header in the request being built, overwriting any header
 with the same name already present.</p></div></div><div class="top"><p class="src"><a name="v:setHttpVersion" class="def">setHttpVersion</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; (<a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>, <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the test request's http version</p></div></div><div class="top"><p class="src"><a name="v:setQueryString" class="def">setQueryString</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Snap-Internal-Http-Types.html#t:Params">Params</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Escapes the given parameter mapping and sets it as the request's query
 string.</p></div></div><div class="top"><p class="src"><a name="v:setQueryStringRaw" class="def">setQueryStringRaw</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the request's query string to be the raw bytestring provided,
 without any escaping or other interpretation. Most users should instead
 choose the <code><a href="Snap-Test.html#v:setQueryString">setQueryString</a></code> function, which takes a parameter mapping.</p></div></div><div class="top"><p class="src"><a name="v:setRequestPath" class="def">setRequestPath</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the request's path. The path provided must begin with a &quot;<code>/</code>&quot; and
 must <em>not</em> contain a query string; if you want to provide a query string
 in your test request, you must use <code><a href="Snap-Test.html#v:setQueryString">setQueryString</a></code> or <code><a href="Snap-Test.html#v:setQueryStringRaw">setQueryStringRaw</a></code>.
 Note that <code><a href="Snap-Internal-Http-Types.html#v:rqContextPath">rqContextPath</a></code> is never set by any <code><a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a></code> function.</p></div></div><div class="top"><p class="src"><a name="v:setRequestType" class="def">setRequestType</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/transformers-0.3.0.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Snap-Test.html#t:RequestType">RequestType</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Sets the type of the <code><a href="Snap-Internal-Http-Types.html#t:Request">Request</a></code> being built.</p></div></div><div class="top"><p class="src"><a name="v:setSecure" class="def">setSecure</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Snap-Test.html#t:RequestBuilder">RequestBuilder</a> m ()</p><div class="doc"><p>Controls whether the test request being generated appears to be an https
 request or not.</p></div></div><h1 id="g:6">HUnit Assertions</h1><div class="top"><p class="src"><a name="v:assertSuccess" class="def">assertSuccess</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></p><div class="doc"><p>Given a Response, asserts that its HTTP status code is 200 (success).</p></div></div><div class="top"><p class="src"><a name="v:assert404" class="def">assert404</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></p><div class="doc"><p>Given a Response, asserts that its HTTP status code is 404 (Not Found).</p></div></div><div class="top"><p class="src"><a name="v:assertRedirectTo" class="def">assertRedirectTo</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>The Response should redirect to this
 URI</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a Response, asserts that its HTTP status code is between 300 and
 399 (a redirect), and that the Location header of the Response points to
 the specified URI.</p></div></div><div class="top"><p class="src"><a name="v:assertRedirect" class="def">assertRedirect</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></p><div class="doc"><p>Given a Response, asserts that its HTTP status code is between 300 and
 399 (a redirect).</p></div></div><div class="top"><p class="src"><a name="v:assertBodyContains" class="def">assertBodyContains</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>Regexp that will match the body content</p></td></tr><tr><td class="src">-&gt; <a href="Snap-Internal-Http-Types.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="file:///Library/Haskell/ghc-7.8.3-x86_64/lib/HUnit-1.2.5.2/doc/html/Test-HUnit-Lang.html#t:Assertion">Assertion</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a Response, asserts that its body matches the given regular
 expression.</p></div></div><h1 id="g:7">Getting response bodies</h1><div class="top"><p class="src"><a name="v:getResponseBody" class="def">getResponseBody</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></p></div><h1 id="g:8">Dumping HTTP Responses</h1><div class="top"><p class="src"><a name="v:dumpResponse" class="def">dumpResponse</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Dumps the given response to stdout.</p></div></div><div class="top"><p class="src"><a name="v:responseToString" class="def">responseToString</a> :: <a href="Snap-Internal-Http-Types.html#t:Response">Response</a> -&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.7.0.1/System-IO.html#t:IO">IO</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.8.3-x86_64/usr/share/doc/ghc/html/libraries/bytestring-0.10.4.0/Data-ByteString.html#t:ByteString">ByteString</a></p><div class="doc"><p>Converts the given response to a bytestring.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>